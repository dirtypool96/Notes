## 事件

- 事件绑定：addEventListener

  （允许给一个事件注册多个监听器，支持事件冒泡+事件捕获）

- 事件冒泡：沿着DOM结构往上冒

- 事件代理：可以实现绑定事件到父元素，不用绑定到每个子元素

  （下面的代码的判断逻辑放在了通用还是件绑定中了）

  1. 代码简介
  2. 减少浏览器内存占用
  3. 不要滥用

```js
// 通用的事件绑定函数
function bindEvent(elem, type, selector, fn) {
  if (fn == null) {
    fn = selector
    selector = null
  }
  elem.addEventListener(type, event => {
    const target = event.target
    if (selector) {
      // 代理绑定
      if (target.matches(selector)) {
        //调用的时候用this       
          fn.call(target, event)
      }
    } else {
      // 普通绑定
      fn.call(target, event)
		}
	})
}

const p1 = document.getElementById('p1')
bindEvent(p1, 'click', event => {
  // 阻止冒泡,不触发body的事件
  event.stopPropagation() 
  // 阻止默认行为
  event.preventDefault()
  console.log('激活')
})
const body = document.body
bindEvent(body, 'click', event => {
  console.log('取消')
})

// 代理绑定
const div3 = document.getElementById('div3')
bindEvent(div3, 'click', 'a', function (event) {
  event.preventDefault()
  // 就不能使用箭头函数
  alert(this.innerHTML)
})
```

