## 一、Next.js简介

React、Vue等框架部署的都是SPA单一页面，这样的页面会出现首屏加载过慢、SEO不便的问题，Next.js这样的SSR框架正是解决这种问题的服务器渲染框架。

Next.js 是一个轻量级的 React 服务端渲染应用框架。

优点：

- **完善的React项目架构，搭建轻松**。比如：Webpack配置，服务器启动，路由配置，缓存能力，这些在它内部已经完善的为我们搭建完成了。
- **自带数据同步策略，解决服务端渲染最大难点**。把服务端渲染好的数据，拿到客户端重用，这个在没有框架的时候，是非常复杂和困难的。
- **丰富的插件帮开发人员增加各种功能**。
- **灵活的配置，让开发变的更简单**。它提供很多灵活的配置项，可以根据项目要求的不同快速灵活的进行配置。

## 二、创建Next.js项目

### 1）如果不使用 `create-next-app`脚手架

```shell
mkdir nextdemo
cd nextdemo
yarn init //初始化成可管理的项目，其实就是在根目录里给你添加了一个package.json
yarn add react react-dom next //npm install --save react react-dom next
```

把常用的配置到`package.json`中

```json
"scripts": {
  "test": "echo \"Error: no test specified\" && exit 1",
  "dev" : "next dev" ,
  "build" : "next build",
  "start" : "next start -p 80"
},
```

根目录创建pages文件夹，这个是Next规定的，在这个文件夹下写入的文件，会自动创建对应的路由。在该文件夹下创建`index.js` 。

#### 代码自动分割

不需要`import`其他内容，每个页面只会导入`import`中绑定以及被用到的代码.，也就是说并不会加载不需要的代码，包括 `import react`

```js
function Index(){
    return (
        <div>Hello Next.js</div>
    )
}
export default Index
```

### 2）使用 `create-next-app`脚手架

全局安装 `create-next-app`

```
yarn global add create-next-app
yarn create next-app demo01
```

#### 目录结构

1. `pages`，以 `./pages`作为服务端的渲染和索引，在这个文件夹下写入的文件，会自动创建对应的路由。
2. `static`，静态文件服务目录，在根目录下新建文件夹叫`static`。代码可以通过`/static/xxx`来引入相关的静态资源。
3. `components`，放置通用组件，例如导航栏等。